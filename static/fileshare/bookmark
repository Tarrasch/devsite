_bookmark_complete()
{
  local bookmarks="$HOME/.my_bookmarks" categories category cur prev

  categories=( $(find "$bookmarks" -mindepth 1 -type d) )
  
  COMPREPLY=()
  cur=${COMP_WORDS[COMP_CWORD]}
  prev=${COMP_WORDS[COMP_CWORD-1]}

  if [ "$prev" == '-a' ]; then
    COMPREPLY=( $(compgen -W "\
                $(  for category in ${categories[@]}; do
                    echo "${category/$bookmarks\//}"
                    done )" -- $cur ) )
  fi
}

complete -F _bookmark_complete bookmark
